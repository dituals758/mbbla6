<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Финансовый трекер</title>
    <meta name="theme-color" content="#4CAF50">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap">
    <link rel="stylesheet" href="styles.css">
    <link rel="apple-touch-icon" href="icons/icon-192x192.png">
</head>
<body>
    <div class="container">
        <header class="app-header">
            <h1>Финансы</h1>
            <button id="sync-btn" class="icon-button" aria-label="Синхронизировать">
                <svg width="24" height="24" viewBox="0 0 24 24"><path fill="currentColor" d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/></svg>
            </button>
        </header>
        
        <div class="tabs">
            <button class="tab-button active" data-tab="add">Добавить</button>
            <button class="tab-button" data-tab="history">История</button>
            <button class="tab-button" data-tab="stats">Статистика</button>
        </div>
        
        <div class="tab-content active" id="add-tab">
            <div class="card">
                <div class="segmented-control">
                    <button class="segment active" data-type="expense">Расход</button>
                    <button class="segment" data-type="income">Доход</button>
                </div>
                
                <div class="form-group">
                    <input type="number" id="amount" placeholder="Сумма" class="input-field" min="0" step="0.01">
                </div>
                
                <div class="form-group">
                    <select id="category" class="input-field">
                        <option value="" disabled selected>Категория</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <input type="date" id="date" class="input-field">
                </div>
                
                <div class="form-group">
                    <input type="text" id="description" placeholder="Описание (необязательно)" class="input-field" maxlength="100">
                </div>
                
                <button id="save-btn" class="primary-button">
                    <span class="button-text">Сохранить</span>
                    <span class="spinner hidden"></span>
                </button>
            </div>
        </div>
        
        <div class="tab-content" id="history-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="section-title">Последние операции</h2>
                    <button id="clear-history" class="icon-button small danger" aria-label="Очистить историю">
                        <svg width="20" height="20" viewBox="0 0 24 24"><path fill="currentColor" d="M19 4h-3.5l-1-1h-5l-1 1H5v2h14M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12z"/></svg>
                    </button>
                </div>
                <div id="transactions-list" class="transactions-list">
                    <div class="empty-state">
                        <svg width="48" height="48" viewBox="0 0 24 24"><path fill="var(--text-secondary)" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/></svg>
                        <p>Нет данных</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="tab-content" id="stats-tab">
            <div class="card">
                <h2 class="section-title">Статистика</h2>
                <div class="form-group">
                    <select id="stats-period" class="input-field">
                        <option value="week">Неделя</option>
                        <option value="month" selected>Месяц</option>
                        <option value="year">Год</option>
                    </select>
                </div>
                
                <div class="stats-summary">
                    <div class="stat-item">
                        <span class="stat-label">Доходы</span>
                        <span id="total-income" class="stat-value income">0 ₽</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Расходы</span>
                        <span id="total-expense" class="stat-value expense">0 ₽</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Баланс</span>
                        <span id="total-balance" class="stat-value">0 ₽</span>
                    </div>
                </div>
                
                <h3 class="chart-title">Расходы по категориям</h3>
                <div id="expense-chart" class="chart-container">
                    <canvas id="expense-canvas"></canvas>
                </div>
                
                <h3 class="chart-title">Доходы по категориям</h3>
                <div id="income-chart" class="chart-container">
                    <canvas id="income-canvas"></canvas>
                </div>
            </div>
        </div>
    </div>
    
    <div id="toast" class="toast hidden"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="lib/storage.js"></script>
    <script src="lib/charts.js"></script>
    <script src="lib/utils.js"></script>
    <script src="lib/api.js"></script>
    <script src="app.js"></script>
</body>
</html>